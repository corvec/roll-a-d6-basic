(this["webpackJsonpengineers-dice-roller"]=this["webpackJsonpengineers-dice-roller"]||[]).push([[0],{104:function(e,t,a){e.exports=a(182)},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},128:function(e,t,a){},182:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),o=a.n(l),c=(a(109),a(3)),i=a(6),s=a(7),u=(a(110),a(20)),m=(a(111),a(12)),d=a(91),f=a(102);var p=function(e){var t=e.action,a=e.children,l=e.className,o=e.info,i=Object(u.a)(e,["action","children","className","info"]),s=function(){t()},p=Object(n.useState)(!1),h=Object(c.a)(p,2),v=h[0],b=h[1],g=function(e){var t=e.holdAction,a=void 0===t?function(){}:t,r=e.cancelHoldAction,l=void 0===r?function(){}:r,o=e.clickAction,i=void 0===o?function(){}:o,s=e.delay,u=void 0===s?1e3:s,m=Object(n.useState)(!1),d=Object(c.a)(m,2),f=d[0],p=d[1],h=Object(n.useRef)(!1),v=Object(n.useRef)(0);Object(n.useEffect)((function(){return f?v.current=setTimeout((function(){h.current=!1,a()}),u):(clearTimeout(v.current),v.current=0),function(){clearTimeout(v.current),v.current=0}}),[a,u,f]);var b=Object(n.useCallback)((function(){p(!0)}),[]),g=Object(n.useCallback)((function(){p(!1),l()}),[l]),E=Object(n.useCallback)((function(e){v.current&&clearTimeout(v.current),h.current=!0,b()}),[b]),y=Object(n.useCallback)((function(e){h.current&&(h.current=!1,i()),g(),e.preventDefault()}),[i,g]);return{onMouseDown:E,onMouseUp:y,onMouseEnter:b,onMouseLeave:function(){h.current=!1,g()},onTouchStart:E,onTouchEnd:y}}({holdAction:function(){return b(!0)},cancelHoldAction:function(){return b(!1)},clickAction:s,delay:500}),E=Object(n.useRef)(null);return o?r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,Object.assign({ref:E,className:l},g,i,{onBlur:function(){return b(!1)}}),a),r.a.createElement(f.a,{show:v,target:E.current},r.a.createElement(d.a,null,o))):r.a.createElement(m.a,Object.assign({className:l,onClick:s},i),a)},h=function(e){var t=e.className,a=e.children,n=Object(u.a)(e,["className","children"]);return r.a.createElement(p,Object.assign({className:"calculator-button ".concat(t||"")},n),a)},v=a(17),b=a(14),g=a(1),E=a.n(g),y=E.a.arrayOf(E.a.oneOfType([E.a.bool,E.a.number,E.a.string]).isRequired).isRequired,O=(E.a.oneOfType([y,E.a.objectOf(y).isRequired,E.a.arrayOf(E.a.shape({minValue:E.a.oneOfType([E.a.number,E.a.string]).isRequired,maxValue:E.a.oneOfType([E.a.number,E.a.string]),result:y,variable:E.a.string}).isRequired).isRequired]),function(e){var t=e.className,a=e.result;if("string"===typeof a)return r.a.createElement("span",{className:t},"result");if(Array.isArray(a)&&a.length>0){if("object"!==typeof a[0])return r.a.createElement("span",null,a.join(", "));if("object"===typeof a[0])return 1===a.length?r.a.createElement("span",{title:"value of ".concat(a[0].variable||"variable"," had no impact")},r.a.createElement("strong",null,a[0].result.join(", "))):r.a.createElement("ul",{className:"results-set"},a.map((function(e,t){var a=e.minValue,n=e.maxValue,l=e.result,o=e.variable;return r.a.createElement("li",{key:t},"string"===typeof o?o:""," ",a>0?"".concat(a):"",0===a?"".concat(n," or below"):"number"===typeof n?"-".concat(n):" or above",": ",l.join(", "))})))}return"object"===typeof a&&a.hasOwnProperty(0)?r.a.createElement("ul",{className:"results-set"},Object.entries(a).map((function(e,t){var a=Object(c.a)(e,2),n=a[0],l=a[1];return r.a.createElement("li",{key:t},">= ",n,": ",l.join(", "))}))):r.a.createElement("span",null,"Cannot parse result")}),j=(a(113),function(e){var t=e.formula,a=e.setFormula,l=e.result,o=e.rolls,i=Object(n.useState)(!0),s=Object(c.a)(i,2),u=s[0],m=s[1];return r.a.createElement("div",{className:"calculator-display"},u?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{className:"formula",onClick:function(){m(!1),a(t.replace(/,/g,"\n"))}},r.a.createElement(b.a,{xs:12},r.a.createElement("strong",null,"Enter Formula:")," ",t)),r.a.createElement(v.a,{className:"result"},r.a.createElement(b.a,{xs:12,className:"text-right"},r.a.createElement(O,{result:l}))),r.a.createElement(v.a,{className:"rolls"},r.a.createElement(b.a,{xs:12,className:"text-right"},"Roll Detail: ",(Array.isArray(o)?o:Object.values(o).flat()).join(", ")))):r.a.createElement(v.a,null,r.a.createElement("textarea",{autoFocus:!0,className:"formula-editor",onBlur:function(){m(!0),a(t.replace(/\s+/g,","))},onChange:function(e){return a(e.target.value)},rows:Math.min(3,(t.match(/\n/g)||[]).length+t.split("\n").reduce((function(e,t){return e+Math.floor(10*t.length/window.innerWidth)}),0)+1),value:t})))});function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var w=r.a.createElement("g",{id:"Pen",opacity:1},r.a.createElement("path",{opacity:1,fill:"none",stroke:"currentColor",strokeWidth:4.816,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 316.139 427.492 L 624.816 152.906 L 606.393 587.538 L 314.646 426.531 Z"}),r.a.createElement("path",{opacity:1,fill:"currentColor",stroke:"currentColor",strokeWidth:4.816,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 316.139 427.492 L 624.816 152.906 L 284.378 322.523 L 315.181 427.196 Z"})),S=r.a.createElement("style",null,"\n    .face { font: bold 100px sans-serif; color: #000; }\n  "),x=r.a.createElement("text",{x:480,y:380,className:"face",rotate:30},"4"),N=function(e){var t=e.svgRef,a=e.title,n=C(e,["svgRef","title"]);return r.a.createElement("svg",k({width:"3in",height:"3in",viewBox:"273.622864 143.397644 360.203491 453.166077",ref:t},n),a?r.a.createElement("title",null,a):null,w,S,x)},R=r.a.forwardRef((function(e,t){return r.a.createElement(N,k({svgRef:t},e))}));a.p;function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var P=r.a.createElement("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2},r.a.createElement("path",{d:"M322.742 216.096l281.993 10.56M604.735 226.656l84.747-50.987M428.142 172.329l261.34 3.34M322.742 216.096l105.4-43.767M613.47 557.568l-8.735-330.912M330.084 540.076l283.386 17.492M322.742 216.096l7.342 323.98M613.47 557.568l87.313-78.089M689.482 175.669l11.301 303.81"})),D=r.a.createElement("style",null,"\n        .face { font: bold 120px sans-serif; }\n    "),L=r.a.createElement("text",{x:445,y:420,className:"face"},"6"),T=function(e){var t=e.svgRef,a=e.title,n=A(e,["svgRef","title"]);return r.a.createElement("svg",M({viewBox:"314.905914 164.895447 393.147491 400.311523",ref:t},n),a?r.a.createElement("title",null,a):null,P,D,L)},I=r.a.forwardRef((function(e,t){return r.a.createElement(T,M({svgRef:t},e))}));a.p;function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var W=r.a.createElement("g",{id:"Pen",opacity:1},r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:4,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 303.547 370.559 L 558.797 249.609 "}),r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:4,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 532.797 577.641 L 304.484 371.496 "}),r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:4,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 527.688 213.246 L 304.938 369.164 "}),r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:4,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 559.062 250.207 L 529.734 212.578 "}),r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:4,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 558.141 250.336 L 744.719 387.281 "}),r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:4,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 533.516 577.781 L 743.328 388.547 "}),r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:4,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 534.453 577.512 L 559.656 253.922 "}),r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:4,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 529.078 212.180 L 743.719 384.434 "})),B=r.a.createElement("style",null,"\n    .face { font: bold 120px sans-serif; }\n  "),V=r.a.createElement("text",{x:420,y:380,className:"face",rotate:40},"8"),q=function(e){var t=e.svgRef,a=e.title,n=F(e,["svgRef","title"]);return r.a.createElement("svg",H({width:"3.482329in",height:"2.900105in",viewBox:"295.238251 203.716797 459.667450 382.813843",ref:t},n),a?r.a.createElement("title",null,a):null,W,B,V)},U=r.a.forwardRef((function(e,t){return r.a.createElement(q,H({svgRef:t},e))}));a.p;function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var G=r.a.createElement("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.75},r.a.createElement("path",{d:"M634.359 485.582c-58.104-22.47267-116.208-44.94533-174.312-67.418M460.047 418.164c52.24467-31.27333 104.48933-62.54667 156.734-93.82M664.547 401.84l-47.766-77.496M634.359 485.582c10.06267-27.914 20.12533-55.828 30.188-83.742M634.359 485.582c-11.01567 16.63267-22.03133 33.26533-33.047 49.898M601.312 535.48c-23.42167-.0467-46.84333-.0933-70.265-.14M531.047 535.34c-23.66667-39.05867-47.33333-78.11733-71-117.176M460.047 418.164l48.969-109.746M509.016 308.418c24.39567-5.55067 48.79133-11.10133 73.187-16.652M616.781 324.344c-11.526-10.85933-23.052-21.71867-34.578-32.578"})),J=r.a.createElement("style",null,"\n        .face { font: bold 100px sans-serif; }\n    "),K=r.a.createElement("text",{x:550,y:380,className:"face",transform:"rotate(-90 620 370)"},"0"),Y=function(e){var t=e.svgRef,a=e.title,n=z(e,["svgRef","title"]);return r.a.createElement("svg",Q({viewBox:"453.655792 286.173126 217.537933 255.637604",ref:t},n),a?r.a.createElement("title",null,a):null,G,J,K)},Z=r.a.forwardRef((function(e,t){return r.a.createElement(Y,Q({svgRef:t},e))}));a.p;function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function X(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var _=r.a.createElement("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.75},r.a.createElement("path",{d:"M341.141 1329.531l-119.643-149.928M221.498 1179.603c26.23501-50.0123 53.42199-100.6597 79.657-150.672M301.155 1028.931c59.53666 18.3167 120.44934 35.9323 179.986 54.249M503.047 1268.629c-7.302-61.8163-14.604-123.6327-21.906-185.449M341.141 1329.531c53.96866-20.3007 107.93734-40.6013 161.906-60.902M503.047 1268.629l124.341 4.137M383.545 1355.043c-14.13467-8.504-28.26933-17.008-42.404-25.512M383.545 1355.043c43.54666-8.7577 87.09334-17.5153 130.64-26.273M627.388 1272.766c-37.73433 18.668-75.46867 37.336-113.203 56.004M481.141 1083.18c39.45333-33.497 78.90667-66.994 118.36-100.491M679.605 1095.529c-26.70135-37.6133-53.40265-75.2267-80.104-112.84M627.388 1272.766c17.25366-58.3407 34.96334-118.8963 52.217-177.237M221.498 1179.603c-4.93667-12.298-9.87333-24.596-14.81-36.894M206.688 1142.709c21.61266-49.6567 43.22534-99.3133 64.838-148.97M271.526 993.739c19.78633-25.702 39.57267-51.404 59.359-77.106M331.169 916.767c-10.00467 37.388-20.00933 74.776-30.014 112.164M330.885 916.633c54.564-9.11367 109.128-18.22733 163.692-27.341M599.501 982.689c-34.97467-31.13233-69.94933-62.26467-104.924-93.397"})),ee=r.a.createElement("style",null,"\n        .face { font: bold 120px sans-serif; }\n    "),te=r.a.createElement("text",{x:320,y:1220,className:"face",transform:"rotate(-20 360 1270)"},"12"),ae=function(e){var t=e.svgRef,a=e.title,n=X(e,["svgRef","title"]);return r.a.createElement("svg",$({viewBox:"198.249146 880.02063 489.612305 484.870728",ref:t},n),a?r.a.createElement("title",null,a):null,_,ee,te)},ne=r.a.forwardRef((function(e,t){return r.a.createElement(ae,$({svgRef:t},e))}));a.p;function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function le(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var oe=r.a.createElement("g",{id:"Pen",opacity:1},r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:1.2,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 526.013 513.496 L 446.328 451.560 L 412.859 375.647 L 430.503 271.071 L 499.972 224.218 L 594.028 201.348 L 673.656 267.651 L 710.747 343.856 L 685.719 449.512 L 620.867 494.260 Z"}),r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:1.2,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 526.013 513.496 L 541.541 480.143 L 641.036 438.115 L 628.825 324.868 L 524.403 298.310 L 471.372 392.166 L 541.541 480.143 "}),r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:1.2,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 412.859 375.647 L 471.486 392.685 "}),r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:1.2,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 524.403 298.310 L 499.373 223.806 "}),r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:1.2,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 628.825 324.868 L 673.770 268.170 "}),r.a.createElement("path",{opacity:1,fill:"none",stroke:"#000000",strokeWidth:1.2,strokeOpacity:1,strokeLinecap:"round",strokeLinejoin:"round",d:"M 685.719 449.512 L 639.952 437.809 "})),ce=r.a.createElement("style",null,"\n    .face { font: bold 90px sans-serif; }\n  "),ie=r.a.createElement("text",{x:530,y:420,className:"face",transform:"rotate(-20 575 465)"},"20"),se=function(e){var t=e.svgRef,a=e.title,n=le(e,["svgRef","title"]);return r.a.createElement("svg",re({width:"2.331688in",height:"2.440335in",viewBox:"407.917816 196.371399 307.782867 322.124268",ref:t},n),a?r.a.createElement("title",null,a):null,oe,ce,ie)},ue=r.a.forwardRef((function(e,t){return r.a.createElement(se,re({svgRef:t},e))})),me=(a.p,a(63)),de=function(e,t){return"a #".concat(t||"".concat(e)," b - Expand into b ").concat(e," b ").concat(e," b... where b is repeated a times. NOTE: b may only be a single roll, value, or variable - it cannot be enclosed in parentheses.")},fe=function(e){var t=e.formula,a=e.result,n=e.rolls,l=e.roll,o=e.saveRoll,c=e.setFormula,i=function(e){var a,n=e.children,l=Object(u.a)(e,["children"]);return r.a.createElement(h,Object.assign({action:(a=l.val||n,function(){return c("".concat(t).concat(a))})},l),n)},s=function(e){var a=e.children,n=e.sides,l=Object(u.a)(e,["children","sides"]);return r.a.createElement(i,Object.assign({className:"dice",info:"A ".concat(n||"??"," sided die.").concat(n?"":" You need to enter the number of sides yourself."),val:"".concat(/\d/.test(t.slice(-1))?"":"1","d").concat(n||""),variant:"outline-success"},l),a)};return r.a.createElement(me.a,{className:"calculator"},r.a.createElement("h1",null,"Calculator"),r.a.createElement(j,{formula:t,setFormula:c,result:a,rolls:n}),r.a.createElement(v.a,{className:"buttons",noGutters:!0},r.a.createElement(b.a,{xs:9},r.a.createElement(v.a,{noGutters:!0},r.a.createElement(b.a,{className:"mb-1",sm:10,md:6,lg:4},r.a.createElement(i,{className:"number"},"7"),r.a.createElement(i,{className:"number"},"8"),r.a.createElement(i,{className:"number"},"9"),r.a.createElement(i,{className:"arithmetic"},"+"),r.a.createElement(i,{className:"number"},"4"),r.a.createElement(i,{className:"number"},"5"),r.a.createElement(i,{className:"number"},"6"),r.a.createElement(i,{className:"arithmetic"},"-"),r.a.createElement(i,{className:"number"},"1"),r.a.createElement(i,{className:"number"},"2"),r.a.createElement(i,{className:"number"},"3"),r.a.createElement(i,{className:"arithmetic"},"*"),r.a.createElement(i,{className:"number"},"0"),r.a.createElement(i,{className:"arithmetic",info:"A grouping operator"},"("),r.a.createElement(i,{className:"arithmetic",info:"A grouping operator"},")"),r.a.createElement(i,{className:"arithmetic",info:"Integer division"},"/")),r.a.createElement(b.a,{className:"mb-1",sm:10,md:6,lg:4},r.a.createElement(s,{sides:20},r.a.createElement(ue,{className:"success",height:"45px",width:"45px"})),r.a.createElement(s,{sides:12},r.a.createElement(ne,{className:"success",height:"45px",width:"45px"})),r.a.createElement(s,{sides:10},r.a.createElement(Z,{className:"success",height:"45px",width:"45px"})),r.a.createElement(s,{sides:8},r.a.createElement(U,{className:"success",height:"45px",width:"45px"})),r.a.createElement(s,{sides:6},r.a.createElement(I,{className:"success",height:"45px",width:"45px"})),r.a.createElement(s,{sides:4},r.a.createElement(R,{className:"success",height:"45px",width:"45px"})),r.a.createElement(s,{sides:100},"d100"),r.a.createElement(s,{sides:null},"d?")),r.a.createElement(b.a,{sm:10,md:6,lg:4},r.a.createElement(i,{className:"compare",info:"a<b - is a less than b?"},"<"),r.a.createElement(i,{className:"compare",info:"a<=b - is a less than or equal to b?"},"<="),r.a.createElement(i,{className:"compare",info:"a>b - is a greater than b?"},">"),r.a.createElement(i,{className:"compare",info:"a>=b - is a greater than or equal to b?"},">="),r.a.createElement(i,{className:"compare",info:"a==b - is a equal to b?"},"=="),r.a.createElement(i,{className:"compare",info:"a<>b - is a not equal to b?"},"<>"),r.a.createElement(i,{className:"compare",info:"a>>b - returns the greater of a and b. NOTE: can be chained (4>>5>>6>>3 returns 6)"},"Max"),r.a.createElement(i,{className:"compare",info:"a<<b - returns the lesser of a and b. NOTE: can be chained (4<<5<<3<<6 returns 3)"},"Min"),r.a.createElement(i,{info:"Assign to a single variable in your formula to see multiple results for different values of the variable",variant:"outline-secondary"},"?"),r.a.createElement(i,{info:"a||b - a OR b - if a is true or non-zero, then a, otherwise b",variant:"outline-secondary"},"||"),r.a.createElement(i,{info:"a&&b - a AND b - if a is true or non-zero, then b, otherwise a",variant:"outline-secondary"},"&&"),r.a.createElement(i,{info:"After a conditional, use this to set your result to the next expression if the conditional is true, or keep the expression's value otherwise, e.g., 1d6==6->10 (returns either false or 10)",val:"->",variant:"outline-secondary"},"Then"),r.a.createElement(i,{info:"Else - Use when you want a value other than false if your conditional fails, e.g., 1d6>5;55 (returns true on a 6 and 55 otherwise). Use in conjunction for maximum power: 1d20>10->1d8+5;0",val:";",variant:"outline-secondary"},"Else")),r.a.createElement(b.a,{sm:10,md:6,lg:4},r.a.createElement(i,{className:"expansion",info:de("+")},"#+"),r.a.createElement(i,{className:"expansion",info:de("*")},"#*"),r.a.createElement(i,{className:"expansion",info:de("||","|")},"#|"),r.a.createElement(i,{className:"expansion",info:de("&&","&")},"#&"),r.a.createElement(i,{className:"macro",info:"a[0] - Local instance variable. Use this to refer to the same macro evaluation in case you need to check a value twice."},"["),r.a.createElement(i,{className:"macro",info:"a[0] - Local instance variable. Use this to refer to the same macro evaluation in case you need to check a value twice."},"]"),r.a.createElement(i,{className:"macro",info:"a{0} - Use to refer to an instance variable that is preserved across the entire roll"},"{"),r.a.createElement(i,{className:"macro",info:"a{0} - Use to refer to an instance variable that is preserved across the entire roll"},"}"),r.a.createElement(i,{className:"macro",info:"Assign a value or macro to a variable, e.g., modifier=5,1d6+modifier"},"="),r.a.createElement(i,{className:"macro",info:"Indicates a variable should be 0 if not provided, e.g., ^adv"},"^"),r.a.createElement(i,{className:"macro",info:"Designates variables that should come from a collection, e.g., ac@Defender"},"@"),r.a.createElement(i,{className:"macro",info:"Separates clauses - either assignments or distinct results."},",")))),r.a.createElement(b.a,{xs:3},r.a.createElement(h,{action:function(){return c(t.slice(0,-1))},className:"func"},"\u232b"),r.a.createElement(h,{action:function(){return c("")},className:"func",info:"Clear the formula entered into the calculator"},"Clear"),r.a.createElement(h,{action:o,className:"save func",info:"Save this roll into the current collection"},"Save Roll"),r.a.createElement(h,{action:l,className:"roll func"},"Roll!"))))},pe=(a(114),a(11)),he=function(e){var t=e.name,a=e.value,n=e.source;return r.a.createElement("li",null,r.a.createElement("strong",null,t)," (from ",n,"): ",a)},ve=function(e){var t=e.helpers;return r.a.createElement("ul",{className:"helpers-details"},t.map((function(e,t){return r.a.createElement(he,Object.assign({key:t},e))})))},be=function(e){var t=e.formula,a=e.helpers,l=e.result,o=e.rolls,i=e.scrollTo,s=e.setScrollTo,u=Object(n.useState)(!1),m=Object(c.a)(u,2),d=m[0],f=m[1],p=Object(n.useRef)();Object(n.useEffect)((function(){if(i)return f(!0),p.current.scrollIntoView({behavior:"smooth",block:"start"}),function(){s(null)}}),[p,i,s]);var h=function(e){p.current.contains(e.target)?(e.preventDefault(),f(!0)):f(!1)};return Object(n.useEffect)((function(){return document.addEventListener("click",h),function(){document.removeEventListener("click",h)}}),[]),r.a.createElement("li",{ref:p,className:"history-item ".concat(d?"active":"")},r.a.createElement("div",{className:"formula"},"Formula: ",t),r.a.createElement("div",{className:"result"},"Result: ",r.a.createElement("strong",null,r.a.createElement(O,{result:l}))),r.a.createElement("div",{className:"rolls"},"Roll Detail: ",r.a.createElement("em",null,Array.isArray(o)?0===o.length?"None":o.join(", "):0===Object(pe.a)(o).length?"None":Object(pe.a)(o).join(", "))),d&&a?r.a.createElement("div",{className:"input-details"},"Helpers Detail: ",r.a.createElement(ve,{helpers:a})):"")},ge=function(e){var t=e.clearHistory,a=e.history,n=e.scrollTo,l=e.setScrollTo;return r.a.createElement("div",{className:"history"},r.a.createElement("h1",null,"History"),r.a.createElement("div",{className:"history-body"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("button",{className:"clear-history",onClick:t},"Clear History")),a.map((function(e,t){return r.a.createElement(be,Object.assign({key:"history-pane-".concat(t),scrollTo:n===t,setScrollTo:l},e))})))))},Ee=a(10),ye=a(93),Oe=a(64),je=a(22),ke=a(15),Ce=(a(117),function(e){var t=e.forceEditable,a=void 0!==t&&t,l=e.inputStyle,o=void 0===l?{}:l,i=e.onClick,s=void 0===i?null:i,u=e.setEditing,d=void 0===u?function(){}:u,f=e.spanStyle,p=void 0===f?{}:f,h=e.updateOnBlur,v=void 0!==h&&h,b=e.setValue,g=e.value,E=Object(n.useState)(a),y=Object(c.a)(E,2),O=y[0],j=y[1],k=function(e){j(e),d(e)},C=Object(n.useState)(g),w=Object(c.a)(C,2),S=w[0],x=w[1];Object(n.useEffect)((function(){v&&x(g)}),[v,g]);var N=function(){v&&b(S),k(!1)};return O?r.a.createElement(Oe.a,{autoFocus:!0,className:o,onBlur:N,onChange:function(e){v?x(e.target.value):b(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(N(),e.preventDefault())},style:o,value:v?S:g}):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:function(e){null===s?k(!0):s(e)},style:p},g),null!==s?r.a.createElement(m.a,{onClick:function(e){e.preventDefault(),e.stopPropagation(),k(!0)},variant:"invisible"},r.a.createElement(ke.a,{icon:je.d,size:"xs"})):null)}),we=a(33),Se=a(92),xe=Object(we.c)((function(){return r.a.createElement(ke.a,{className:"mr-2",icon:Se.faEllipsisV})})),Ne=(a(118),function(e){var t=e.collectionName,a=e.duplicate,l=e.forceEditable,o=e.move,i=e.navTo,s=e.rename,u=Object(n.useState)(l),d=Object(c.a)(u,2),f=d[0],p=d[1];return r.a.createElement("div",{className:"list-group-item list-group-item-action"},r.a.createElement(v.a,null,r.a.createElement(b.a,null,r.a.createElement("h3",null,f?null:r.a.createElement(xe,null),r.a.createElement(Ce,{forceEditable:l,onClick:i,setEditing:p,setValue:function(e){return s(t,e)},updateOnBlur:!0,value:t}))),r.a.createElement(b.a,null,r.a.createElement(ye.a,null,r.a.createElement(m.a,{className:"mr-1",onClick:function(e){a(),e.stopPropagation()},variant:"outline-primary"},"Duplicate"),r.a.createElement(m.a,{onClick:function(e){o(),e.stopPropagation()},variant:"outline-warning"},"Move")))))}),Re=a(94),Me=a.n(Re),Ae=function(e){var t=e.controlled,a=void 0===t||t,l=e.editButton,o=e.formula,i=e.name,s=e.readOnlyProp,u=e.saveRoll,m=e.setReadOnlyProp,d=Object(n.useState)(!0),f=Object(c.a)(d,2),p=f[0],h=f[1],v=Object(n.useState)(o),b=Object(c.a)(v,2),g=b[0],E=b[1];return(null!=s?s:p)?r.a.createElement("span",{className:"formula",onClick:function(){a||E(o),h(!1),"function"===typeof m&&m(!1)}},o,l?r.a.createElement(ke.a,{className:"ml-2",icon:je.d}):null):r.a.createElement(Me.a,{autoFocus:!0,className:"formula-editor",onBlur:function(){a||o===g||u({name:i,formula:g}),h(!0),"function"===typeof m&&m(!0)},onChange:function(e){a?u({name:i,formula:e.target.value}):E(e.target.value)},type:"text",value:a?o:g})},Pe=a(42),De=a(95),Le=function(e){var t=e.collections,a=e.chosenCollection,n=e.setChosenCollection;return r.a.createElement(De.a,{title:a||r.a.createElement("em",null,"Choose Collection")},r.a.createElement(Pe.a.Item,{onClick:function(){return n("")}},"None"),Object.entries(t).map((function(e,t){var a=Object(c.a)(e,1)[0];return r.a.createElement(Pe.a.Item,{key:"coll-".concat(t),onClick:function(){return n(a)}},a)})))},Te=a(41),Ie=function(e,t){var a=Object(c.a)(t,2),n=a[0],r=a[1];return Object(s.a)({},e,Object(Ee.a)({},n,r))},He=function(e,t){t[e];var a=Object(u.a)(t,[e].map(Te.a));return Object(s.a)({},a)},Fe=function(e,t,a){return Object.entries(a).map((function(a){var n=Object(c.a)(a,2),r=n[0],l=n[1];return r===e?[t,l]:[r,l]})).reduce(Ie,{})},We=function e(t,a){return 0===a.length?t:t&&"object"===typeof t?e(t[a[0]],a.slice(1)):void 0},Be=function(e,t){if(!t.hasOwnProperty(e))return e;var a=function(t){return"".concat(e," ").concat(t)};return function e(n){return t.hasOwnProperty(a(n))?e(n+1):a(n)}(1)},Ve=a(19),qe=a(74),Ue=a(184),Qe=a(37),ze=(a(123),a(124),a(23)),Ge=a(27),Je=function(e){var t=e.action,a=e.show,n=e.setShow,l=e.text,o=e.title,c=void 0===o?"Are you sure?":o,i=function(){return n(!1)};return a?r.a.createElement(Ge.a,{show:a,onHide:i},r.a.createElement(Ge.a.Header,{closeButton:!0},r.a.createElement(Ge.a.Title,null,c)),r.a.createElement(Ge.a.Body,null,l),r.a.createElement(Ge.a.Footer,null,r.a.createElement(m.a,{variant:"secondary",onClick:i},"Cancel"),r.a.createElement(m.a,{variant:"danger",onClick:function(){t(),n(!1)}},"OK"))):null},Ke=function(e){var t=e.hasMissingVariables,a=e.onlyUnknownVariable,n=e.roll,l=e.size,o=void 0===l?"lg":l,c=e.suppliedValues,i=e.targetCollections,u=e.valuesFromTargetedCollections;return r.a.createElement(m.a,{block:!0,className:"lg"===o?"mr-1 p-4":"",disabled:t,onClick:function(e){e.stopPropagation(),n(a?Object(s.a)({},c,{},u,Object(Ee.a)({},a,"?")):Object(s.a)({},c,{},u),i)},size:o,title:"Roll!",variant:"outline-primary"},r.a.createElement(ke.a,{className:t?"secondary":"success",icon:je.c,size:"2x"}))},Ye=function(e){var t=e.onlyUnknownVariable,a=e.rollMetadata,n=e.setSuppliedValues,l=e.suppliedValues,o=e.valuesFromTargetedCollections;return r.a.createElement(Ue.a,null,r.a.createElement(Ue.a.Group,null,r.a.createElement(Ue.a.Label,{column:!1},"Unknown variables"),a.unknownVariables.map((function(e,c){return r.a.createElement(Qe.a,{key:"unknown-".concat(c)},r.a.createElement(Qe.a.Prepend,null,r.a.createElement(Qe.a.Text,null,e)),r.a.createElement(Oe.a,{className:"unknown-variable-value",onChange:function(t){return n(Object(s.a)({},l,Object(Ee.a)({},e,t.target.value)))},placeholder:a.noPromptVariables.includes(e)?"0":t===e?"?":null,readOnly:o.hasOwnProperty(e),value:o.hasOwnProperty(e)?o[e]:l[e]||""}))}))))},Ze=ze.b.getTargetCollection,$e=ze.b.stripPrefix,Xe=ze.b.stripSuffix,_e=function(e){var t=e.activateFormulaInCalculator,a=e.childCollections,l=e.clone,o=e.collapsed,i=e.convertPathStringToPathArray,u=e.formula,d=e.getCollectionByPath,f=e.gotoResultInHistory,p=e.name,h=e.remove,g=e.rename,E=e.roll,y=e.rollMetadata,j=e.result,k=e.saveRoll,C=e.scrollTo,w=e.setScrollTo,S=Object(n.useState)({}),x=Object(c.a)(S,2),N=x[0],R=x[1],M=Object(n.useState)({}),A=Object(c.a)(M,2),P=A[0],D=A[1],L=Object(n.useState)(!1),T=Object(c.a)(L,2),I=T[0],H=T[1],F=Object(n.useState)({action:function(){},show:!1,text:""}),W=Object(c.a)(F,2),B=W[0],V=W[1],q=Object(n.useRef)(null);Object(n.useEffect)((function(){if(C)return H(!0),q.current.scrollIntoView({behavior:"smooth",block:"start"}),function(){w(null)}}),[q,C,w]);var U=Object.entries(P).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return Object.entries(d(i(n)).rolls).filter((function(e){var t=Object(c.a)(e,1)[0];return y.unknownVariables.some((function(e){return Ze(e)===a&&t===$e(Xe(e))}))})).map((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];return["".concat(n,"@").concat(a),r]}))})).flat().reduce(Ie,{}),Q=Object.entries(y.targetedCollections).length>0||y.unknownVariables.length>0,z=y.unknownVariables.filter((function(e){return!(y.noPromptVariables.includes(e)&&("string"!==typeof N[e]||0===N[e].length))&&!("string"===typeof N[e]&&ze.c.validateClause(N[e],0))&&!Object.keys(U).includes(e)})),G=z.length>1||1===z.length&&Object.values(N).some((function(e){return"?"===e})),J=G||1!==z.length?null:z[0],K={hasMissingVariables:G,onlyUnknownVariable:J,roll:E,suppliedValues:N,targetCollections:P,valuesFromTargetedCollections:U};return o?r.a.createElement(Ve.a,{className:"saved-roll",ref:q},r.a.createElement(Ve.a.Header,null,r.a.createElement(xe,null),p),r.a.createElement(Ve.a.Body,null,r.a.createElement(Ke,Object.assign({},K,{size:"xs"})),j?r.a.createElement(qe.a,{style:{width:"100%"},title:"Last rolled result",variant:"success"},r.a.createElement(O,{result:j})):null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.a,{className:"saved-roll",ref:q},r.a.createElement(Ve.a.Header,{as:"h4"},!I&&r.a.createElement(xe,null),r.a.createElement(Ce,{forceEditable:C,setEditing:H,updateOnBlur:!0,setValue:function(e){return g(p,e)},value:p}),!I&&r.a.createElement(ke.a,{className:"danger trash-button",icon:je.g,onClick:function(){return V({action:h,show:!0,text:"Click OK to delete this roll."})},title:"Delete this saved roll"})),r.a.createElement(Ve.a.Body,null,r.a.createElement(v.a,null,Q&&r.a.createElement(b.a,null,0===Object.entries(y.targetedCollections).length?null:r.a.createElement(Ue.a,null,r.a.createElement(Ue.a.Group,null,r.a.createElement(Ue.a.Label,null,"Target Collections"),Object.entries(y.targetedCollections).map((function(e,t){var n,l=Object(c.a)(e,1)[0];return r.a.createElement(Qe.a,{key:"unk-coll-".concat(t),as:v.a},r.a.createElement(Qe.a.Prepend,null,r.a.createElement(Qe.a.Text,null,l)),r.a.createElement(Le,{collections:a,chosenCollection:P[l],setChosenCollection:(n=l,function(e){D(Object(s.a)({},P,Object(Ee.a)({},n,e))),""===e||y.targetedCollections[n].some((function(t){return a[e].rolls.hasOwnProperty(t)}))||window.alert("The selected collection does not have any of the needed values.")})}))})))),0===y.unknownVariables.length?null:r.a.createElement(Ye,{onlyUnknownVariable:J,rollMetadata:y,setSuppliedValues:R,suppliedValues:N,valuesFromTargetedCollections:U})),r.a.createElement(b.a,{md:Q?"auto":null},r.a.createElement(v.a,null,r.a.createElement(Ke,Object.assign({},K,{size:"lg"}))),j?r.a.createElement(v.a,{className:"mt-1"},r.a.createElement(qe.a,{style:{width:"100%"},title:"Last rolled result",variant:"success"},r.a.createElement(ke.a,{className:"float-left",icon:je.e}),r.a.createElement(O,{result:j}),"function"===typeof f?r.a.createElement(ke.a,{className:"float-right",icon:je.f,onClick:f,title:"Click to go to result in History"}):null)):null))),r.a.createElement(Ve.a.Footer,{className:"text-muted"},r.a.createElement(Ae,{activateFormulaInCalculator:t,controlled:!1,editButton:!0,formula:u,name:p,saveRoll:k}),r.a.createElement(m.a,{className:"ml-2",onClick:t,variant:"outline-info"},r.a.createElement(ke.a,{alt:"Load in calculator",icon:je.a})),r.a.createElement(m.a,{className:"float-right",onClick:l,variant:"outline-secondary"},r.a.createElement(ke.a,{alt:"Duplicate this saved roll",icon:je.b})))),r.a.createElement(Je,Object.assign({setShow:function(e){return V(Object(s.a)({},B,{show:e}))}},B)))},et=function(e){var t=e.activateFormulaInCalculator,a=e.formula,l=e.name,o=e.remove,i=e.rename,u=e.rollMetadata,m=e.saveRoll,d=Object(n.useState)(!1),f=Object(c.a)(d,2),p=f[0],h=f[1],v=Object(n.useState)(!1),b=Object(c.a)(v,2),g=b[0],E=b[1],y=Object(n.useState)({action:function(){},show:!1,text:""}),O=Object(c.a)(y,2),j=O[0],k=O[1],C=u.value.join(",")===a;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.a,{className:"mr-1 mb-1"},r.a.createElement(Ve.a.Header,null,!g&&r.a.createElement(xe,null),r.a.createElement(Ce,{updateOnBlur:!0,setEditing:E,setValue:function(e){return i(l,e)},value:l}),!g&&r.a.createElement(ke.a,{className:"danger trash-button",icon:je.g,onClick:function(){return k({action:o,show:!0,text:"Click OK to delete this saved value."})},title:"Delete this saved value"})),r.a.createElement(Ve.a.Body,null,C?null:r.a.createElement(Ve.a.Title,{onClick:t},u.value.join(", ")),r.a.createElement(Ve.a.Text,{className:"text-muted"},r.a.createElement(Ae,{controlled:!1,editButton:!0,formula:a,name:l,saveRoll:m,readOnlyProp:!p,setReadOnlyProp:function(e){return h(!e)}})))),r.a.createElement(Je,Object.assign({setShow:function(e){return k(Object(s.a)({},j,{show:e}))}},j)))},tt=a(69),at=a(97),nt=a(98),rt=function(e){var t=e.name,a=e.value,n=Object(u.a)(e,["name","value"]);return r.a.createElement(Ve.a,null,r.a.createElement(Ve.a.Body,n,t,": ",a))},lt=function(e){var t=e.children;return r.a.createElement("li",null,t)},ot=function e(t){var a=t.Container,n=void 0===a?lt:a,l=t.data;return r.a.createElement("ul",{className:"treeview"},l.map((function(t,a){var l=t.children,o=t.node;return r.a.createElement(n,{key:a},o,l?r.a.createElement(e,{Container:n,data:l}):null)})))},ct=function(e){var t=e.action,a=e.children;return r.a.createElement("button",{className:"list-group-item list-group-item-action",onClick:t},a)},it=function(e){0},st=function(e){var t=e.collections,a=e.pathToExclude,n=e.selectCollection,l={collectionPath:"/",node:r.a.createElement(ct,{key:"cnode-Root",action:function(){return n("/")}},"Root"),children:Object.entries(t.Root.collections).reduce(function e(t){return function(l,o){var s=Object(c.a)(o,2),u=s[0],m=s[1],d="".concat(t,"/").concat(u);return a===d?(it(),l):(it("Path: ".concat(d)),[].concat(Object(i.a)(l),[{collectionPath:d,node:r.a.createElement(ct,{key:"cnode-".concat(d),action:function(){return n(d)}},u),children:Object.entries(m.collections).reduce(e(d),[])}]))}}(""),[])};return r.a.createElement(ot,{Container:function(e){var t=e.children;return r.a.createElement("div",{className:"list-group"},t)},data:[l]})},ut=a(96),mt=function(e){var t=e.errorMessage,a=e.setErrorMessage;return t?r.a.createElement(ut.a,{dismissible:!0,onClose:function(){return a(null)},variant:"danger"},t):null},dt=function(e){var t=e.action,a=e.collections,l=e.pathToExclude,o=e.show,i=e.setShow,s=e.title,u=void 0===s?"Select Collection":s,d=Object(n.useState)(null),f=Object(c.a)(d,2),p=f[0],h=f[1],v=function(){return i(!1)};return o?r.a.createElement(Ge.a,{show:o,onHide:v},r.a.createElement(Ge.a.Header,{closeButton:!0},r.a.createElement(Ge.a.Title,null,u)),r.a.createElement(Ge.a.Body,null,r.a.createElement(mt,{errorMessage:p,setErrorMessage:h}),r.a.createElement(st,Object.assign({collections:a,pathToExclude:l},{selectCollection:function(e){return function(e){try{t(e),i(!1)}catch(a){h(a.message)}}(e)}}))),r.a.createElement(Ge.a.Footer,null,r.a.createElement(m.a,{variant:"secondary",onClick:v},"Cancel"))):null},ft=Object(we.a)((function(e){var t=Object.assign({},e);return r.a.createElement(v.a,t)})),pt=Object(we.a)((function(e){var t=Object.assign({},e);return r.a.createElement("div",t)})),ht=Object(we.b)((function(e){var t=Object.assign({},e);return r.a.createElement(Ne,t)})),vt=Object(we.b)((function(e){var t=Object.assign({},e);return r.a.createElement(et,t)})),bt=Object(we.b)((function(e){var t=Object.assign({},e);return r.a.createElement(_e,t)})),gt=Object(we.b)((function(e){var t=Object.assign({},e);return r.a.createElement(rt,t)})),Et=function(e){var t=e.collectionState,a=e.history,l=e.roll,o=e.saveRoll,i=e.selectCalculator,u=e.selectHistory,d=e.setFormula,f=Object(n.useState)(null),p=Object(c.a)(f,2),h=p[0],g=p[1],E=Object(n.useState)(null),y=Object(c.a)(E,2),O=y[0],j=y[1],k=Object(n.useState)({rolls:!1,values:!1}),C=Object(c.a)(k,2),w=C[0],S=C[1],x=Object(n.useState)({action:function(){},show:!1,text:""}),N=Object(c.a)(x,2),R=N[0],M=N[1],A=Object(n.useState)({action:function(){},collections:t.collections,show:!1}),P=Object(c.a)(A,2),D=P[0],L=P[1],T=function(e){return function(){d(e),i()}},I=function(e){return function(){t.removeRoll(e)}},H=function(e){var n=e.name,r=e.formula;return function(e,o){var i=Object.entries(e).filter((function(e){return Object(c.a)(e,2)[1].length>0})).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return",".concat(a,"=").concat(n)})).join(""),s="".concat(r).concat(i);l(s,(function(e){var r=e.result,l=e.rolls,c=e.sideEffects;t.setLastRoll({historyIndex:a.length-1,name:n,result:r,rolls:l,sideEffects:c,targetCollections:o})}))}},F=function(e){var t=e.collection;return r.a.createElement(m.a,{className:"btn-left-of-row",onClick:function(){return S(Object(s.a)({},w,Object(Ee.a)({},t,!0)))},variant:"outline-info"},r.a.createElement(ke.a,{icon:at.faCompressArrowsAlt}))},W=function(e){var t=e.collection;return r.a.createElement(m.a,{className:"btn-left-of-row",onClick:function(){return S(Object(s.a)({},w,Object(Ee.a)({},t,!1)))},variant:"outline-info"},r.a.createElement(ke.a,{icon:nt.faExpandArrowsAlt}))},B=t.activeCollection,V=t.currentCollection,q=t.getRollsWithDetails,U=t.removeCurrentCollection,Q=t.renameCurrentCollection,z=q(),G=Object.entries(V.rolls),J=G.filter((function(e){var t=Object(c.a)(e,1)[0];return"value"!==z[t].type})),K=G.filter((function(e){var t=Object(c.a)(e,1)[0];return"value"===z[t].type})),Y=function(e){var a={rolls:J,values:K}[e];return function(e){var n=e.oldIndex,r=e.newIndex;if(!("number"!==typeof n||n<0||n>K.length)){var l=a[n][0],o=a[r][0],i=G.findIndex((function(e){return Object(c.a)(e,1)[0]===o}));t.moveRoll(l,i)}}};return r.a.createElement(me.a,null,r.a.createElement("h1",null,"Collections"),0===B.length?null:r.a.createElement(tt.a,null,B.map((function(e,a){return a<B.length-1?r.a.createElement(tt.a.Item,{key:a,href:"#".concat(e),onClick:function(){return t.navigateToParent(B.length-a-1)}},e):r.a.createElement(tt.a.Item,{key:a,active:!0},e)}))),r.a.createElement(v.a,{className:"mb-2"},r.a.createElement(b.a,null,r.a.createElement(m.a,{onClick:function(){return g(t.createCollection())},variant:"primary"},"Create Child Collection")),B.length<=1?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null,r.a.createElement(m.a,{onClick:function(){return M({action:U,show:!0,text:"Click OK to delete this collection."})},variant:"danger"},"Remove Current Collection")),r.a.createElement(b.a,null,r.a.createElement(m.a,{onClick:Q,variant:"secondary"},"Rename Current Collection")))),r.a.createElement(pt,{className:"list-group",onSortEnd:function(e){var a=e.oldIndex,n=e.newIndex;if(!("number"!==typeof a||a<0||a>K.length)){var r=Object.entries(V.collections)[a][0];t.moveChildCollection(r,n)}},useDragHandle:!0},Object.entries(V.collections).map((function(e,a){var n=Object(c.a)(e,2),l=n[0];n[1];return r.a.createElement(ht,{key:l,collectionName:l,duplicate:function(){return t.duplicate(l)},forceEditable:l===h,index:a,move:function(){return e=l,L(Object(s.a)({},D,{action:function(a){return t.move(e,a)},pathToExclude:"".concat(t.activeCollection.join("/"),"/").concat(e).replace(/^Root\//,"/"),show:!0,title:"Move ".concat(e)}));var e},navTo:function(){return t.navigateTo(l)},rename:t.renameChildCollection})}))),r.a.createElement("h3",{className:"mt-4"},"Saved Rolls and Values"),r.a.createElement(m.a,{block:!0,onClick:function(){return j(t.createRoll())},variant:"success"},"Create Roll"),0===K.length?null:w.values?r.a.createElement(ft,{axis:"xy",className:"mt-3",onSortEnd:Y("values")},r.a.createElement(W,{collection:"values"}),K.map((function(e,t){var a=Object(c.a)(e,2),n=a[0];a[1];return r.a.createElement(gt,{key:n,index:t,name:n,value:z[n].value.join(", ")})}))):r.a.createElement(ft,{axis:"xy",className:"mt-3",onSortEnd:Y("values"),useDragHandle:!0},r.a.createElement(F,{collection:"values"}),K.map((function(e,a){var n=Object(c.a)(e,2),l=n[0],i=n[1],s="string"===typeof i?i:i.formula;return r.a.createElement(vt,{key:l,activateFormulaInCalculator:T(s),formula:s,index:a,name:l,remove:I(l),rename:t.renameRoll,rollMetadata:z[l],saveRoll:o,value:z[l].value})}))),J.length>0?r.a.createElement(ft,{axis:"xy",className:"mt-2",onSortEnd:Y("rolls"),useDragHandle:!0},w.rolls?r.a.createElement(W,{collection:"rolls"}):r.a.createElement(F,{collection:"rolls"}),J.map((function(e,a){var n=Object(c.a)(e,2),l=n[0],i=function(e){return"string"===typeof e?{formula:e}:Object(s.a)({},e,{gotoResultInHistory:e.historyIndex?function(){u(e.historyIndex+1)}:null})}(n[1]),m=i.formula,d=i.result,f=i.gotoResultInHistory;return r.a.createElement(bt,{key:l,activateFormulaInCalculator:T(m),childCollections:V.collections,clone:function(){return t.cloneRoll(l)},collapsed:w.rolls,convertPathStringToPathArray:t.convertPathStringToPathArray,formula:m,getCollectionByPath:t.getCollectionByPath,gotoResultInHistory:f,index:a,move:function(e){return t.moveRoll(l,e)},name:l,rename:t.renameRoll,remove:I(l),result:d,roll:H({name:l,formula:m}),rollMetadata:z[l],saveRoll:o,scrollTo:O===l,setScrollTo:j})}))):null,r.a.createElement(Je,Object.assign({setShow:function(e){return M(Object(s.a)({},R,{show:e}))}},R)),r.a.createElement(dt,Object.assign({setShow:function(e){return L(Object(s.a)({},D,{show:e}))}},D)))},yt=a(75),Ot=a.n(yt),jt=a(99),kt=(a(128),a(67)),Ct=(a(89),[{version:"0.1",date:"2019-Aug-5",features:["Initial Release","Calculator, history, save rolls"]},{version:"0.2",date:"2019-Aug-6",features:["Persist state to local storage","Style updates","Reduce scope of saved macro values to only be within the same macro"]},{version:"0.3",date:"2019-Aug-7",features:["Initial support for && and || operators","Style updates","Create an editable textarea when clicking in the formula box","Allow it to not just look like a phone","Improved deployment procedure"]},{version:"0.4",date:"2019-Aug-8",features:["Disable some instances of accidental zooming","Fix for | and & - characters were not passing validation","Fix prompt for unassigned variables"]},{version:"0.5",date:"2019-Aug-8",features:["Disable some instances of accidental zooming","Fix for | and & - characters were not passing validation","Fix prompt for unassigned variables"]},{version:"0.5.1",date:"2019-Aug-9",features:["Style updates"]},{version:"0.6",date:"2019-Aug-12",features:["Behind the scenes improvements","Nested collections","Source formulas from active collection, shared collection, or parent collections of the active collection","Default collections on first load","Change macro buttons to pull from collections","When pressing dice buttons automatically prefix d# with 1 if there isn't a number","Show roll info on macro buttons","Settings Tab that allows deleting all localStorage data for the app"]},{version:"0.7",date:"2019-Aug-13",features:["Only pull in helper assignments from macros when we reference the macro by name in our expression or a dependency","Behind the scenes: JSDoc added for many complicated functions","Changelog added"]},{version:"0.8",date:"2019-Aug-15",features:["Duplicate collections","Move collections - needs work","Rename collections"]},{version:"0.9",date:"2019-Aug-21",features:["Global macro instance operator - {}",'^ Operator - means "assume this value is 0 if it\'s not set"',"Roll saved rolls from the Collections page"]},{version:"0.10",date:"2019-Aug-23",features:["Dice button images","Inline editing for saved rolls","Link from the Collections page to the associated History entry","Preserve location for the Collections, History, and Settings tab when navigating back and forth"]},{version:"0.11",date:"2019-Aug-24",features:["Fix negative numbers","Styling fix","Division is now floored, to better support D&D - a non-flooring division operator may be added later"]},{version:"0.11.1",date:"2019-Aug-25",features:["Fix negative numbers properly","Ensure that an expression's helper macros by a given name are used before macros from a collection"]},{version:"0.12",date:"2019-Aug-25",features:["Separate values and rolls","Supply values (including with formulas) to saved rolls in-line"]},{version:"0.13",date:"2019-Sep-8",features:["Improved look & feel","Supply collections when collection formulas use macro@target notation","Expansion operators (#+, #*, #&, #|)","Support for a single unknown variable (using a value of ?)","Inline inputs for the values needed by collection saved rolls, with defaults","Go to history from collection roll and highlight the history entry"]},{version:"0.14",date:"2019-Sep-9",features:["Tooltips on calculator buttons","Buttons for max and min","Style fixes and color changes","Layout improvements"]},{version:"0.15",date:"2019-Sep-18",features:["Show helper info in history items","Fix bug that crashed the whole app permanently if an invalid formula was entered","Add tests for default collection state","Add extra info if an error is encountered when rolling (both saved and calculator)","List 5E PHB armor and weapons in default collection","Nested collections inside Shared (all get loaded)","Support renaming saved rolls, values, and collections","Support cloning saved rolls","Drag and drop to reorder saved rolls, values, and collections","Buttons to collapse/expand all saved rolls or all saved values"]},{version:"0.16",date:"2020-Feb-18",features:["Move core rolling library into its own repository","Only dice that were actually rolled as part of the formula are listed now"]},{version:"0.17",date:"2020-Mar-2",features:["Side effect support: $varname","Side effect operator: +=","Side effect operator: -=","Side effect operator: := to assign the value","Side effects: support recursing with internal side effects","Side effects: support modifying current collection","Side effects: support modifying target collection","Targeted variables now dynamically update as the target value updates"]},{version:"0.18",date:"2020-Mar-3",features:["Rudimentary import / export"]},{version:"0.19",date:"2020-Mar-21",features:["Moved to demo.dicerollr.com","Added an FAQ, link to the product roadmap, etc..","Name change to DiceRollr","Fix bug in default atk saved roll. The new formula is roll[0]==20->dmgDice[0]+dmgDice[1]+dmgMod;(roll[0]==1->0;(roll[0]+bonus>=ac@Defender->dmgDice[0]+dmgMod;0))","Fix for the collapsed changelog still taking up space on the page","Add Animate Objects default collection"]}]),wt=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(!1),s=Object(c.a)(o,2),u=s[0],m=s[1];return r.a.createElement("div",{className:"changelog"},r.a.createElement("h2",{className:"collapseHeader",onClick:function(){l(!a),m(!0),setTimeout((function(){return m(!1)}),1e3)}},a?"\u25bc Changelog (Click to Hide)":"\u25ba Changelog (Click to Show)"),r.a.createElement(kt.Animated,{animateOnMount:!1,animationIn:"bounceInDown",animationOut:"bounceOutUp",animationDuration:"500",isVisible:a,style:a||u?{}:{display:"none"}},r.a.createElement("ul",{className:"change-list"},Object(i.a)(Ct).reverse().map((function(e,t){var a=e.version,n=e.date,l=e.features;return r.a.createElement("li",{key:t,className:"change"},r.a.createElement("div",{className:"info"},"Version ",r.a.createElement("strong",null,a),r.a.createElement("br",null),n),r.a.createElement("ul",{className:"features-list"},l.map((function(e,t){return r.a.createElement("li",{key:t,className:"feature"},e)}))))})))))},St=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),s=i[0],u=i[1];return r.a.createElement("div",{className:"faq"},r.a.createElement("h2",{className:"collapseHeader",onClick:function(){l(!a),u(!0),setTimeout((function(){return u(!1)}),1e3)}},a?"\u25bc FAQ (Click to Hide)":"\u25ba FAQ (Click to Show)"),r.a.createElement(kt.Animated,{animateOnMount:!1,animationIn:"bounceInDown",animationOut:"bounceOutUp",animationDuration:1e3,isVisible:a,style:a||s?{}:{display:"none"}},r.a.createElement("h3",null,r.a.createElement("strong",null,"Q:")," What is this?"),r.a.createElement("p",null,'This is a demo of the upcoming DiceRollr app. Currently, it supports rolling sophisticated dice formulas that no other dice roller supports, like calculating the damage from 10 summons against a single creature in one roll. It also allows you to build your own completely custom collections of reusable dice rolls. For example, you could build a collection for each of your characters and put the rolls that are shared between them in the "Shared" collection.'),r.a.createElement("h3",null,r.a.createElement("strong",null,"Q:")," How do I use it?"),r.a.createElement("p",null,'Build your rolls and collections in the "Collections" tab. You can roll from there, too.'),r.a.createElement("p",null,"Check out the ",r.a.createElement("a",{href:"https://github.com/corvec/roll-a-d6/blob/master/README.md"},"core library README")," for info on how to build formulas."),r.a.createElement("p",null,'For one-off dice rolls, use the "Calculator" tab.'),r.a.createElement("h3",null,r.a.createElement("strong",null,"Q:")," You said this is a demo. What will the full product look like?"),r.a.createElement("p",null,"Current plans involve mobile apps (iOS and Android) as well as a mobile and desktop friendly web app. The apps are planned to support the following, though they might not support it all initially:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Cross-device collection syncing"),r.a.createElement("li",null,"Local and server-side rolling"),r.a.createElement("li",null,"Virtual tables, with the ability to share your rolls with other users and for GMs/DMs to request rolls from their players"),r.a.createElement("li",null,"All the functionality that you need to keep your character fully tracked in the app, like notes, lists, etc...")),r.a.createElement("h3",null,r.a.createElement("strong",null,"Q:")," Who's working on it?"),r.a.createElement("p",null,"This app and the ",r.a.createElement("a",{href:"https://github.com/corvec/roll-a-d6"},"core rolling library")," has been developed by and is being developed by single developer, ",r.a.createElement("a",{href:"https://github.com/corvec"},"Corvec"),"."),r.a.createElement("h3",null,r.a.createElement("strong",null,"Q:")," What's coming next?"),r.a.createElement("p",null,"Check out the ",r.a.createElement("a",{href:"https://trello.com/b/v9pAcRPQ/dicerollr-roadmap"},"Project Roadmap"),"."),r.a.createElement("h3",null,r.a.createElement("strong",null,"Q:")," I have a feature request! How should I contact you?"),r.a.createElement("p",null,"Great! For now, please post your feature request on the ",r.a.createElement("a",{href:"https://github.com/corvec/roll-a-d6/issues"},"roll-a-d6 repository's Issues tracker.")),r.a.createElement("h3",null,r.a.createElement("strong",null,"Q:")," Will it be open-source?"),r.a.createElement("p",null,"I'm currently leaning toward keeping the app and server code closed source but open-sourcing the core library (roll-a-d6).")))},xt=a(100),Nt={bold:{fontWeight:"bold"}},Rt=function(){var e=Object(jt.a)(Ot.a.mark((function e(t){var a;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),t){e.next=3;break}return e.abrupt("return");case 3:if(!window.confirm("Are you sure? You will lose all your data.")){e.next=9;break}return e.next=7,t.text();case 7:(a=e.sent)&&(localStorage.setItem("collections",a),window.location.reload());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mt=function(){return r.a.createElement("div",{className:"settings"},r.a.createElement("h1",null,"Settings"),r.a.createElement("div",{className:"settings-body"},r.a.createElement("div",{className:"settings-section"},r.a.createElement("h2",null,"Export Data"),r.a.createElement("p",null,"NOTE: Currently, we only support full overwrites."),r.a.createElement("button",{className:"export",onClick:function(){var e=new File([localStorage.collections],"DiceExport.json",{type:"application/json;charset=utf-8"});Object(xt.saveAs)(e)}},"Export"),r.a.createElement("h2",null,"Import Data"),r.a.createElement("p",{style:Nt.bold},"Please export your data prior to importing data."),r.a.createElement("label",null,"Import: ",r.a.createElement("input",{type:"file",accept:"application/json",onChange:function(e){return Rt(e.currentTarget.files[0])}}))),r.a.createElement("div",{className:"settings-section"},r.a.createElement("h2",null,"Clear Local Data"),r.a.createElement("p",null,"Are you having issues with the app, or do you just want to restore the default settings? Try clearing your local data and then refreshing the page."),r.a.createElement("p",{style:Nt.bold},"NOTE: This is irreversible and you will lose all saved rolls and history."),r.a.createElement("button",{className:"clear-localstorage",onClick:function(){window.confirm("Are you sure? You will lose all your data.")&&localStorage.clear()}},"Clear Localstorage")),r.a.createElement("div",{className:"settings-section"},r.a.createElement(St,null)),r.a.createElement("div",{className:"settings-section"},r.a.createElement(wt,null))))},At=function(e,t){var a=localStorage.getItem(e);return a?JSON.parse(a):t},Pt=function(e,t){return function(a){localStorage.setItem(e,JSON.stringify(a)),t(a)}},Dt=function(e,t,a,n,r,l,o){var c=function(e,t,a,n,r,l){return{moveBack:function(){l([e].concat(Object(i.a)(r))),t(a.slice(-1)[0]),n(a.slice(0,-1))},moveForward:function(){n([].concat(Object(i.a)(a),[e])),t(r[0]),l(r.slice(1))},viewTimeline:function(){return{past:a,present:e,future:r}}}}(t,a,n,r,l,o);return[t,function(l){Pt("".concat(e,"History"),r)([].concat(Object(i.a)(n),[t])),Pt(e,a)(l)},c]},Lt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,l=r?r(At(e,t)):At(e,t),o=Object(n.useState)(l),i=Object(c.a)(o,2),s=i[0],u=i[1],m=At("".concat(e,"History"),[]),d=Object(n.useState)(m),f=Object(c.a)(d,2),p=f[0],h=f[1],v=At("".concat(e,"Future"),[]),b=Object(n.useState)(v),g=Object(c.a)(b,2),E=g[0],y=g[1];return a?Dt(e,s,u,p,h,E,y):[s,Pt(e,u)]},Tt=function(){var e=Lt("activeTab","calculator"),t=Object(c.a)(e,2),a=t[0],r=t[1],l=Lt("history",[]),o=Object(c.a)(l,2),s=o[0],u=o[1],m=Lt("formula",""),d=Object(c.a)(m,2),f=d[0],p=d[1],h=Lt("result",["Not Rolled"]),v=Object(c.a)(h,2),b=v[0],g=v[1],E=Lt("rolls",[]),y=Object(c.a)(E,2),O=y[0],j=y[1],k=Object(n.useState)(null),C=Object(c.a)(k,2),w=C[0],S=C[1];return{activeTab:a,setActiveTab:r,history:s,setHistory:u,formula:f,setFormula:p,result:b,setResult:g,rolls:O,setRolls:j,scrollToItem:w,setScrollToItem:S,pushHistoryItem:function(e){return u([].concat(Object(i.a)(s),[e]))}}},It={Root:{collections:{Shared:{rolls:{roll:"r=1d20,(^adv&&^disadv)||(adv==0&&disadv==0)->r[0];(adv->r[0]>>r[1];r[0]<<r[1])",atk:"roll[0]==20->dmgDice[0]+dmgDice[1]+dmgMod;(roll[0]==1->0;(roll[0]+bonus>=ac@Defender->dmgDice[0]+dmgMod;0))",bonus:"prof+dmgMod"},collections:{armor:{collections:{},rolls:{shield:"2",leatherArmor:"11+Dex",paddedArmor:"11+Dex,badSneak=1",studdedLeatherArmor:"12+Dex",hideArmor:"12+(Dex<<2)",chainShirt:"13+(Dex<<2)",scaleMail:"14+(Dex<<2),badSneak=1",breastPlate:"14+(Dex<<2),badSneak=1",halfPlate:"15+(Dex<<2),badSneak=1",ringMail:"14,badSneak=1",chainMail:"16,badSneak=1,armorSpeedPenalty=Str<13->-10;0",splintArmor:"17,badSneak=1,armorSpeedPenalty=Str<15->-10;0",plateArmor:"18,badSneak=1,armorSpeedPenalty=Str<15->-10;0"}},weapons:{collections:{},rolls:{club:"1d4,dmgMod=Str",dagger:"1d4,dmgMod=Dex>>Str,range=20,longRange=60",greatClub:"1d8,dmgMod=Str",handAxe:"1d6,dmgMod=Str,range=20,longRange=60",javelin:"1d6,dmgMod=Str,range=30,longRange=120",lightHammer:"1d4,dmgMod=Str,range=20,longRange=60",mace:"1d6,dmgMod=Str",quarterstaff:"^twoHanded->1d8;1d6,dmgMod=Str",sickle:"1d4,dmgMod=Str",spear:"1d6,dmgMod=Str,range=20,longRange=60",unarmedStrike:"1,dmgMod=Str",lightCrossbow:"1d8,dmgMod=Dex,range=80,longRange=320",dart:"1d4,dmgMod=Dex>>Str,range=20,longRange=60",shortbow:"1d6,dmgMod=Dex,range=80,longRange=320",sling:"1d4,dmgMod=Dex,range=30,longRange=120",battleaxe:"^twoHanded->1d10;1d8,dmgMod=Str",flail:"1d8,dmgMod=Str",glaive:"1d10,dmgMod=Str,reach=1",greataxe:"1d12,dmgMod=Str",greatsword:"2d6,dmgMod=Str",halberd:"1d10,dmgMod=Str,reach=1",lance:"1d12,dmgMod=Str,reach=1",longSword:"^twoHanded->1d10;1d8,dmgMod=Str",maul:"2d6,dmgMod=Str",morningstar:"1d8,dmgMod=Str",pike:"1d10,dmgMod=Str,reach=1",rapier:"1d8,dmgMod=Dex>>Str",scimitar:"1d6,dmgMod=Dex>>Str",shortSword:"1d6,dmgMod=Dex>>Str",trident:"^twoHanded->1d8;1d6,dmgMod=Str,range=20,longRange=60",warPick:"1d8,dmgMod=Str",warhammer:"^twoHanded->1d10;1d8,dmgMod=Str",whip:"1d4,dmgMod=Dex>>Str,reach=1",blowgun:"1,dmgMod=Dex,range=25,longRange=100",handCrossbow:"1d6,dmgMod=Dex,range=30,longRange=120",heavyCrossbow:"1d10,dmgMod=Dex,range=100,longRange=400",longbow:"1d8,dmgMod=Dex,range=150,longRange=600",net:"0,dmgMod=0,range=5,longRange=15"}}}},Default:{rolls:{},collections:{}},"Example PC - Fighter":{rolls:{initiative:"roll+Dex",duelingStyle:"^ranged||^twoHanded->0;2","Attack with Long Sword":"dmgDice=longSword,dmgMod=Str+duelingStyle,bonus=prof+Str,atk+atk",secondWind:"1d10+5",maneuverSaveDC:"8+prof+Str",superiorityDie:"1d8",Str:"4",Dex:"2",Con:"3",Int:"0",Wis:"1",Cha:"-1",prof:"3",AC:"chainMail+shield"},collections:{saves:{rolls:{strSave:"roll+Str+prof",dexSave:"roll+Dex",conSave:"roll+Con+prof",intSave:"roll+Int",wisSave:"roll+Wis",chaSave:"roll+Cha"},collections:{}},skills:{rolls:{Athletics:"roll+Str+prof",Acrobatics:"roll+Dex","Sleight of Hand":"roll+Dex",Stealth:"roll+Dex",Arcana:"roll+Int",History:"roll+Int",Investigation:"roll+Int",Nature:"roll+Int",Religion:"roll+Int","Animal Handling":"roll+Wis",Insight:"roll+Wis",Medicine:"roll+Wis",Perception:"roll+Wis+prof",Survival:"roll+Wis",Deception:"roll+Cha",Intimidation:"roll+Cha",Performance:"roll+Cha",Persuasion:"roll+Cha"},collections:{}}}},"Example PC - Rogue":{rolls:{initiative:"roll+Dex+Cha","Main Hand":"dmgDice=shortSword+sneakAttackIfPossible,atk","Off Hand":"dmgMod=0,dmgDice=shortSword+sneakAttackIfPossible,atk","Both Attacks":"dmgDice=shortSword,(atk[0]+atk[1])>0->(atk[0]+atk[1]+sneakAttackIfPossible);0",sneakAttackIfPossible:"canYouSneakAttack->sneakAttack;0",Str:"-1",Dex:"4",Con:"2",Int:"0",Wis:"1",Cha:"3",prof:"3",AC:"studdedLeatherArmor",sneakAttack:"3d6"},collections:{saves:{rolls:{strSave:"roll+Str",dexSave:"roll+Dex+prof",conSave:"roll+Con",intSave:"roll+Int+prof",wisSave:"roll+Wis",chaSave:"roll+Cha"},collections:{}},skills:{rolls:{Athletics:"roll+Str",Acrobatics:"roll+Dex+prof","Sleight of Hand":"roll+Dex",Stealth:"roll+Dex+prof","Thieves' Tools":"roll+Dex+2*prof",Arcana:"roll+Int",History:"roll+Int",Investigation:"roll+Int",Nature:"roll+Int",Religion:"roll+Int","Animal Handling":"roll+Wis",Insight:"roll+Wis",Medicine:"roll+Wis",Perception:"roll+Wis+2*prof",Survival:"roll+Wis",Deception:"roll+Cha",Intimidation:"roll+Cha",Performance:"roll+Cha",Persuasion:"roll+Cha"},collections:{}}}},"Animate Objects":{rolls:{deadObjects:"0",prof:"4",chosenObjects:"tinyObjects","All Attack":"dmgDice=chosenObjects,(number-deadObjects)#+atk","All Attack, Flanking":"dmgDice=chosenObjects,adv=1,(number-deadObjects)#+atk",tinyObjects:"1d4,dmgMod=4,number=10",smallObjects:"1d8,dmgMod=2,number=10",mediumObjects:"2d6,dmgMod=1,number=5",largeObjects:"2d10,dmgMod=2,number=2",hugeObjects:"2d12,dmgMod=4,number=1"},collections:{goblin:{collections:{},rolls:{ac:"15"}}}}},rolls:{}}},Ht=a(18),Ft=function(e){return e.join(".collections.")},Wt=function(e,t){var a=e.activeCollection,n=e.collections,r=e.setActiveCollection,l=e.setCollections,o=t.convertPathStringToPathArray,m=t.currentCollection,d=t.getCollectionByPath,f=t.parentCollection,p=t.pathToParent;return{createCollection:function(){var e=Be("New Collection",m.collections);return function(e){var t=e.name;l(Ht.a.set(n,"".concat(Ft(a),".collections.").concat(t),{rolls:{},collections:{}}))}({name:e}),e},removeCurrentCollection:function(){if(null!==p){var e=a.slice(-1)[0],t=f.collections,o=(t[e],Object(u.a)(t,[e].map(Te.a)));return r(a.slice(0,-1)),l(Ht.a.set(n,"".concat(Ft(p),".collections"),o))}},duplicate:function(e){var t=JSON.parse(JSON.stringify(m.collections[e]));return l(Ht.a.set(n,"".concat(Ft(a),".collections"),Object(s.a)({},m.collections,Object(Ee.a)({},"Copy of ".concat(e),t))))},move:function(e,t){var r=Ft(a).replace(/(^Root)?.collections./g,"/").replace(/^Root/,"/");if(t&&t!==r){var c=o(t),i=d(c);if("object"!==typeof We(i,["collections"]))throw new Error("Bad path!");if(i.collections.hasOwnProperty(e))throw new Error("Cannot move this Collection. The destination Collection already has a child Collection by the same name.");var u=Ht.a.set(n,"".concat(Ft(c),".collections"),Object(s.a)({},i.collections,Object(Ee.a)({},e,m.collections[e]))),f=d(a,u),p=Ht.a.set(u,"".concat(Ft(a),".collections"),He(e,f.collections));l(p)}},moveChildCollection:function(e,t){var r=Object.entries(m.collections).filter((function(t){return Object(c.a)(t,1)[0]!==e})),o=[].concat(Object(i.a)(r.slice(0,t)),[[e,m.collections[e]]],Object(i.a)(r.slice(t))).reduce(Ie,{});return l(Ht.a.set(n,"".concat(Ft(a),".collections"),o))},renameChildCollection:function(e,t,r){if(m.collections.hasOwnProperty(t))"function"===typeof r&&r();else{var o=Fe(e,t,m.collections);l(Ht.a.set(n,"".concat(Ft(a),".collections"),o))}},renameCurrentCollection:function(){if(!(a.length<=1)){var e=window.prompt("Enter new name","");if(e)if(f.collections.hasOwnProperty(e))alert("Cannot rename a Collection to be the same as another Collection under the same parent.");else{var t=function(e,t,a){var n=a[e],r=Object(u.a)(a,[e].map(Te.a));return Object(s.a)(Object(Ee.a)({},t,n),r)}(a.slice(-1)[0],e,f.collections);l(Ht.a.set(n,"".concat(Ft(p),".collections"),t)),r([].concat(Object(i.a)(p),[e]))}}}}},Bt=ze.b.getTargetCollection,Vt=ze.b.stripPrefix,qt=ze.b.stripSuffix,Ut=ze.b.variableTargetsCollection,Qt=ze.a.getMacrosFromCollection,zt=ze.a.getRollMetadata,Gt=function(e,t){var a=e.activeCollection,n=(e.setActiveCollection,e.collections),r=e.setCollections,l=t.convertPathStringToPathArray,o=t.currentCollection,m=t.getCollectionByPath,d=(t.getCurrentPath,function(e){var t=e.formula,l=e.name;return r(Ht.a.set(n,"".concat(Ft(a),".rolls.").concat(l),t))}),f=function(e){var t=e.currentCollections,o=void 0===t?n:t,i=e.sideEffects,s=void 0===i?{}:i,u=e.targetCollections,m=void 0===u?{}:u;if(0!==Object.entries(s).length){var d=Object.entries(s).reduce((function(e,t){var n=Object(c.a)(t,2),r=n[0],o=n[1],i=function(e,t){return Ut(e)?l(t[Bt(e)]):a}(r,m),s=Vt(qt(r));return Ht.a.set(e,"".concat(Ft(i),".rolls.").concat(s),"".concat(o))}),o);r(d)}},p=function(e){return"string"===typeof e?e:He("historyIndex",e)},h=function e(t,a){var n=Object(c.a)(a,2),r=n[0],l=n[1];return Object(s.a)({},t,Object(Ee.a)({},r,Object(s.a)({},l,{rolls:Object.entries(l.rolls).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return[a,p(n)]})).reduce(Ie,{}),collections:Object.entries(l.collections).reduce(e,{})})))},v=function(e){return"string"===typeof e?e:e.formula},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.rolls;return Object.entries(e).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return[a,v(n)]})).reduce(Ie,{})},g=Object(i.a)(Array(a.length-1).keys()).reduce((function(e,t,n){return Object(s.a)({},e,{},b(m(a.slice(0,n+1)).rolls))}),{}),E=n.Root.collections.hasOwnProperty("Shared")?Object(s.a)({},b(n.Root.collections.Shared.rolls),{},function e(t){return Object.values(t.collections).map((function(t){return Object(s.a)({},b(t.rolls),{},e(t))})).reduce((function(e,t){return Object(s.a)({},e,{},t)}),{})}(n.Root.collections.Shared)):[],y=function(e,t){var a=v(e),n=zt(a,t);return Object(s.a)({formula:a},n)};return{addRollToCurrentCollection:d,clearHistory:function(){return r(Object.entries(n).reduce(h,{}))},cloneRoll:function(e){var t=Be(e,o.rolls),l=Object.entries(o.rolls).reduce((function(a,n){var r,l=Object(c.a)(n,2),o=l[0],i=l[1];return o===e?Object(s.a)({},a,(r={},Object(Ee.a)(r,o,i),Object(Ee.a)(r,t,i),r)):Object(s.a)({},a,Object(Ee.a)({},o,i))}),{});return r(Ht.a.set(n,"".concat(Ft(a),".rolls"),l))},createRoll:function(){var e=Be("New Roll",o.rolls);return d({name:e,formula:"1d20"}),e},getRollFormula:v,getRolls:b,getRollsWithDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.rolls,t=Qt(Object(s.a)({},E,{},g,{},b()));return Object.entries(e).map((function(e){var a=Object(c.a)(e,2),n=a[0],r=a[1];return[n,y(r,t)]})).reduce(Ie,{})},moveToEnd:function(e){var t=[].concat(Object(i.a)(Object.entries(o.rolls).filter((function(t){var a=Object(c.a)(t,1)[0];return e!==a}))),[[e,o.rolls[e]]]).reduce(Ie,{});return r(Ht.a.set(n,"".concat(Ft(a),".rolls"),t))},moveRoll:function(e,t){var l=Object.entries(o.rolls).filter((function(t){return Object(c.a)(t,1)[0]!==e})),s=[].concat(Object(i.a)(l.slice(0,t)),[[e,o.rolls[e]]],Object(i.a)(l.slice(t))).reduce(Ie,{});return r(Ht.a.set(n,"".concat(Ft(a),".rolls"),s))},removeRoll:function(e){var t=o.rolls,l=(t[e],Object(u.a)(t,[e].map(Te.a)));return r(Ht.a.set(n,"".concat(Ft(a),".rolls"),l))},renameRoll:function(e,t,l){if(o.rolls.hasOwnProperty(t))"function"===typeof l&&l();else{var c=Fe(e,t,o.rolls);r(Ht.a.set(n,"".concat(Ft(a),".rolls"),c))}},parentRolls:g,saveRoll:function(e){if(e.length>0){var t=window.prompt("Name of saved roll","");if(t&&!o.rolls[t])d({formula:e,name:t});else if(t){window.confirm("Click OK to overwrite existing roll by that name")&&d({formula:e,name:t})}}},setLastRoll:function(e){var t=e.historyIndex,l=e.name,c=e.result,i=e.rolls,u=e.sideEffects,m=void 0===u?{}:u,d=e.targetCollections,p=o.rolls[l],h="string"===typeof p?{formula:p,historyIndex:t,result:c,rolls:i}:Object(s.a)({},p,{historyIndex:t,result:c,rolls:i}),v=Ht.a.set(n,"".concat(Ft(a),".rolls.").concat(l),h);Object.entries(m).length>0?f({currentCollections:v,sideEffects:m,targetCollections:d}):r(v)},sharedRolls:E}},Jt=function(){var e=Lt("collections",It),t=Object(c.a)(e,2),a=t[0],n=t[1],r=Lt("activeCollection",["Root"]),l=Object(c.a)(r,2),o=l[0],u={collections:a,setCollections:n,activeCollection:o,setActiveCollection:l[1]},m=function(e){var t=e.activeCollection,a=e.setActiveCollection,n=e.collections,r=function(e,t,a,n){return a<n.length-1?[].concat(Object(i.a)(e),[t,"collections"]):[].concat(Object(i.a)(e),[t])},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return We(t,e.reduce(r,[]))},o=function(){return"".concat(t.join("/")).replace(/^Root\//,"/")};return{convertPathStringToPathArray:function(e){return("/"===e.substring(0,1)?e:"".concat(o(),"/").concat(e)).replace(/^\/?/,"Root/").split("/").filter((function(e){return e}))},getCollectionByPath:l,getCollectionByPathReduceHelper:r,getCurrentPath:o,navigateToRoot:function(){return a(["Root"])},navigateToParent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a(t.slice(0,0-e))},navigateTo:function(e){return a([].concat(Object(i.a)(t),[e]))},currentCollection:l(t),pathToParent:t.slice(0,-1),parentCollection:t.length>1?l(t.slice(0,-1)):null}}(u),d=Gt(u,m),f=Wt(u,m);return Object(s.a)({activeCollection:o,collections:a},m,{},d,{},f)},Kt=function(){var e=Tt(),t=e.activeTab,a=e.setActiveTab,n=e.formula,l=e.setFormula,o=e.result,u=e.setResult,m=e.rolls,d=e.setRolls,f=e.scrollToItem,p=e.setScrollToItem,h=e.history,v=e.setHistory,b=e.pushHistoryItem,g=Jt(),E=function(e){var t=e.result,a=e.resultRange,n=e.rolls;u(a||t),d(n)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E;try{var a=Object(s.a)({},g.sharedRolls,{},g.parentRolls,{},g.getRolls()),r=Object(ze.d)(e,a);t(Object(s.a)({expression:e},r));var l=[].concat(Object(i.a)(Object.entries(g.sharedRolls).map((function(e){var t=Object(c.a)(e,2);return{name:t[0],source:"Shared",value:t[1]}}))),Object(i.a)(Object.entries(g.parentRolls).map((function(e){var t=Object(c.a)(e,2);return{name:t[0],source:"Parent",value:t[1]}}))),Object(i.a)(Object.entries(g.getRolls()).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return{name:a,source:"/".concat(g.activeCollection.join("/")),value:n}})))).filter((function(e,t,a){var n=e.name;return!a.slice(t+1).some((function(e){return e.name===n}))})).filter((function(e){var t=e.name;return(r.allMacros||{}).hasOwnProperty(t)})).filter((function(e){var t=e.name;return!r.macros.hasOwnProperty(t)}));b(Object(s.a)({formula:e},r,{helpers:l}))}catch(o){console.error(o),u(["Error!"]),d([])}},O=Object(s.a)({},g.getRolls(g.sharedRolls),{},Object.keys(g.currentCollection.rolls).length>0?g.getRolls():g.parentRolls);return r.a.createElement("div",{className:"App"},"calculator"===t?r.a.createElement(fe,{formula:n,result:o,rolls:m,macros:O,setFormula:l,saveRoll:function(){return g.saveRoll(n)},roll:function(){return y()}}):null,r.a.createElement("div",{style:"collections"!==t?{display:"none"}:{}},r.a.createElement(Et,{collectionState:g,history:h,roll:y,saveRoll:g.addRollToCurrentCollection,selectCalculator:function(){return a("calculator")},selectHistory:function(e){p(e),a("history")},setFormula:l})),r.a.createElement("div",{style:"history"!==t?{display:"none"}:{}},r.a.createElement(ge,{clearHistory:function(){v([]),g.clearHistory()},history:h,scrollTo:f,setScrollTo:p})),r.a.createElement("div",{style:"settings"!==t?{display:"none"}:{}},r.a.createElement(Mt,null)),r.a.createElement("div",{className:"app-nav"},r.a.createElement("button",{onClick:function(){return a("collections")},className:"collections"===t?"active":""},"Collections"),r.a.createElement("button",{onClick:function(){return a("calculator")},className:"calculator"===t?"active":""},"Calculator"),r.a.createElement("button",{onClick:function(){return a("history")},className:"history"===t?"active":""},"History"),r.a.createElement("button",{onClick:function(){return a("settings")},className:"settings"===t?"active":""},"Settings")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Kt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[104,1,2]]]);
//# sourceMappingURL=main.902064a7.chunk.js.map